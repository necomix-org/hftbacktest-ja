[
  {
    "index": 0,
    "source": [
      "# データ準備"
    ]
  },
  {
    "index": 1,
    "source": [
      "HftBacktestの力を最大限に活用するには、Tick-by-Tickのフルオーダーブックとトレードフィードデータを入力する必要があります。残念ながら、HFT用の無料のTick-by-Tickのフルオーダーブックとトレードフィードデータは、Yahoo Financeのようなプラットフォームが提供する日次バー データとは異なり、利用できません。ただし、暗号通貨の場合は、フルの生データを自分で収集することができます。"
    ]
  },
  {
    "index": 2,
    "source": [
      "## Binance Futuresの生データから始める\n",
      "\n",
      "Binance Futuresのデータを自分で収集するには、[Data Collector](https://github.com/nkaz001/hftbacktest/tree/master/collector)を使用できます。"
    ]
  },
  {
    "index": 4,
    "source": [
      "行の最初のトークンはローカルで受信したタイムスタンプです。\n",
      "\n",
      "<div class=\"alert alert-info\">\n",
      "    \n",
      "**注:** タイムスタンプはナノ秒単位です。\n",
      "    \n",
      "</div>"
    ]
  },
  {
    "index": 5,
    "source": [
      "データはHftBacktestに入力できる正規化データに変換する必要があります。  \n",
      "`convert`メソッドは、行を並べ替えることでタイムスタンプを修正しようとします。"
    ]
  },
  {
    "index": 7,
    "source": [
      "正規化されたデータは次のとおりです。詳細については、[データ](https://hftbacktest.readthedocs.io/en/latest/data.html)をご覧ください。"
    ]
  },
  {
    "index": 9,
    "source": [
      "データを直接ファイルに保存するには、`output_filename`を指定します。"
    ]
  },
  {
    "index": 11,
    "source": [
      "## 市場深度スナップショットの作成"
    ]
  },
  {
    "index": 12,
    "source": [
      "Binance Futures取引所は24時間365日稼働しているため、完全な（ほぼ）市場深度を取得するには初期スナップショットが必要です。  \n",
      "[Data Collector](https://github.com/nkaz001/hftbacktest/tree/master/collector)は接続時にのみスナップショットを取得するため、収集されたフィードデータの開始から初期スナップショットを作成する必要があります。"
    ]
  },
  {
    "index": 14,
    "source": [
      "スナップショットでは、ビッドレベルがアスクレベルの前に表示され、レベルは最良価格から最も遠い価格までソートされます。"
    ]
  },
  {
    "index": 19,
    "source": [
      "## Tardis.devデータから始める\n",
      "\n",
      "いくつかのベンダーは、スナップショットおよびトレードデータとともにティック単位の完全な市場深度データを提供しており、Tardis.devもその1つです。\n",
      "\n",
      "<div class=\"alert alert-info\">\n",
      "    \n",
      "**注:** 一部のデータには取引所のタイムスタンプに問題がある場合があります。理想的には、取引所のタイムスタンプはマッチングエンジンでイベントが発生した瞬間を反映する必要があります。ただし、一部のデータでは、マッチングエンジンのタイムスタンプの代わりにサーバーのデータ送信タイムスタンプが使用されます。\n",
      "\n",
      "</div>"
    ]
  },
  {
    "index": 21,
    "source": [
      "トレードファイルを深度ファイルの前に入力することをお勧めします。これは、トレードイベントによって深度イベントが発生した場合、トレードイベントを深度イベントの前に持ってくることで、バックテスト中により現実的なフィルを提供できるためです。ただし、ソートプロセスでは、両方のイベントが同じタイムスタンプを持つ場合、最初の入力ファイルのイベントが優先されます。"
    ]
  },
  {
    "index": 24,
    "source": [
      "データを直接ファイルに保存するには、`output_filename`を指定します。行が多すぎる場合は、`buffer_size`を増やす必要があります。  "
    ]
  },
  {
    "index": 26,
    "source": [
      "Tardis.devは、日次ファイルの開始時にSODスナップショットを人工的に挿入します。複数の日を連続してバックテストする場合、毎日の開始時にスナップショットを取得する必要はなく、バックテストに時間がかかる可能性があります。オプションを使用して、変換されたファイルにTardis.devのSODスナップショットを含めることができます。"
    ]
  }
]