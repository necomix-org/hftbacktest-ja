[
  {
    "index": 0,
    "source": [
      "# キューに基づく大きなティックサイズ資産のマーケットメイキング\n",
      "\n",
      "## 概要\n",
      "キュー位置の重要性は、特に大きなティックサイズの資産において、ミクロ構造取引でよく知られています。これは、大きなティックサイズの資産が通常、価格変動がより制約されているためです。ティックサイズの影響については、[\"Large tick assets: implicit spread and optimal tick size\"](https://arxiv.org/pdf/1207.6325)で詳しく説明されています。\n",
      "\n",
      "![CRVUSDT_chart](https://github.com/nkaz001/hftbacktest/blob/master/docs/images/CRVUSDT_chart.png)\n",
      "\n",
      "<div class=\"alert alert-info\">\n",
      "    \n",
      "**注:** この例は教育目的のみであり、高頻度マーケットメイキングスキームの効果的な戦略を示しています。すべてのバックテストは、Binance Futuresで利用可能な最高のマーケットメイカーリベートである0.005％のリベートに基づいています。詳細については、<a href=\"https://www.binance.com/en/support/announcement/binance-updates-usd%E2%93%A2-margined-futures-liquidity-provider-program-2024-06-03-fefc6aa25e0947e2bf745c1c56bea13e\">Binance Upgrades USDⓢ-Margined Futures Liquidity Provider Program</a> を参照してください。\n",
      "    \n",
      "</div>\n",
      "\n",
      "## ブックプレッシャー\n",
      "まず、[Market Microstructure signals described in this article](https://blog.headlandstech.com/2017/08/)を確認します。これは、マイクロプライスの概念に似ています。ブックの不均衡については、[Market Making with Alpha - Order Book Imbalance](https://github.com/nkaz001/hftbacktest/blob/master/examples/Market%20Making%20with%20Alpha%20-%20Order%20Book%20Imbalance.ipynb)でも取り上げられています。"
    ]
  },
  {
    "index": 6,
    "source": [
      "## トレードインパルス\n",
      "\n",
      "トレードインパルスを組み込むとどのように変化するかを見てみましょう。"
    ]
  },
  {
    "index": 12,
    "source": [
      "最後の取引数量が最良買い気配値と最良売り気配値の数量に比べて比較的小さいため、大きな違いはありません。\n",
      "\n",
      "![CRVUSDT_depth](https://github.com/nkaz001/hftbacktest/blob/master/docs/images/CRVUSDT_depth.png)\n",
      "\n",
      "次の例は、集計された取引数量を使用したトレードインパルスのバリエーションを示しています。"
    ]
  },
  {
    "index": 18,
    "source": [
      "`trade_impulse_adj`を調整してトレードインパルスの影響を変更することもできます。あるいは、`(best_bid * best_ask_qty + best_ask * best_bid_qty + last_px * last_qty) / (best_bid_qty + best_ask_qty + last_qty)`、VWAPなど、トレードインパルスを計算する他の方法を探ることもできます。"
    ]
  },
  {
    "index": 19,
    "source": [
      "## 純粋なキューに基づくモデル\n",
      "\n",
      "この戦略が利益を生む可能性がある理由の1つは、大きなティックサイズによる価格変動の制限です。たとえば、CRVUSDTのティックサイズは38ベーシスポイント（0.001 / 0.26 * 10,000）であり、BTCUSDTのティックサイズが約0.018ベーシスポイント（0.1 / 54,000 * 10,000）と比較して非常に大きいです。\n",
      "\n",
      "これはまた、大きなティックサイズの資産のフィルシミュレーションにおけるキュー位置モデリングの重要性を強調しています。\n",
      "\n",
      "上記のCRVUSDTチャートを観察すると、ほとんどの取引が最良買い気配値と最良売り気配値で行われており、全体的な価格レベルにほとんど変化がないことがわかります。\n",
      "\n",
      "これは、ミクロ構造信号を純粋にキューに基づく信号に調整する機会を示唆しています。たとえば、価格レベルを維持するのに十分な数量があり、価格が不利に動くのを防ぐことができる場合、私たちのクォートを維持することを選択できます。これがどのように実装できるかを簡略化した形で見てみましょう。"
    ]
  },
  {
    "index": 25,
    "source": [
      "`qty_threshold`を動的に制御し、スキュー値と統合するなど、より洗練されたアプローチを探ることもできます。たとえば、`qty_threshold * (1 ± skew_val)`のように、スキューが価格に適用されるのと同様に適用します。言い換えれば、前の例ではスプレッドが価格の観点で設定されていますが、キュー位置、注文の後ろのキュー、総キューなど、キューの観点でスプレッドを設定することができます。\n",
      "\n",
      "さらに、固定間隔で反応するのではなく、各フィードの受信に応じて反応する方が効果的かもしれません。これにより、BBOの数量が急速に減少する場合に迅速に反応し、不利な選択を回避するのに役立ちます。このアプローチは、`wait_next_feed`メソッドを使用してテストできます。"
    ]
  }
]